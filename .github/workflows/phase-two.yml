name: Phase Two - AGOL Filter

on:
  workflow_dispatch:

jobs:
  run-phase-two:
    runs-on: windows-latest

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Set up Miniconda
        uses: conda-incubator/setup-miniconda@v2
        with:
          auto-activate-base: false
          activate-environment: arcgis-env
          environment-file: environment-phase2.yml
          python-version: 3.9
          channels: conda-forge, esri, defaults

      - name: Run Phase 2 Script
        env:
          AGOL_USERNAME: ${{ secrets.AGOL_USERNAME }}
          AGOL_PASSWORD: ${{ secrets.AGOL_PASSWORD }}
        run: python phase_two.py

